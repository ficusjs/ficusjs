function withWorkerStore(s,e){return{...e,created(){const o=this;if(o.worker=s,globalThis.__ficusjs__=globalThis.__ficusjs__||{},globalThis.__ficusjs__.workers=globalThis.__ficusjs__.workers||new Map,globalThis.__ficusjs__.workers.has(s)){const e=globalThis.__ficusjs__.workers.get(s);e.has(o)||e.add(o)}else{const e=new Set;e.add(o),globalThis.__ficusjs__.workers.set(s,e)}s.onmessage||(o.worker.onmessage=e=>{const o=globalThis.__ficusjs__.workers.get(s);for(const s of o)s.state=e.data,s.computedCache={},s._processRender.apply(s)}),o.store={dispatch(s,e){o.worker.postMessage({actionName:s,payload:e})}},e.created&&e.created.call(o)}}}export{withWorkerStore};
